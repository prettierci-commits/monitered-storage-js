var MoniteredStorage=function(a){this._store(a);this.changed=!1};MoniteredStorage.prototype.update=function(a){this._store(a);this.changed=!0};MoniteredStorage.prototype._store=function(a){this.data="undefined"===typeof a?{}:a instanceof MoniteredStorage?this._copy(a.data):this._copy(a)};
MoniteredStorage.prototype._copy=function(a){if(a instanceof MoniteredStorage)return new MoniteredStorage(this._copy(a.data));switch(toString.call(a)){case "[object Array]":return a.map(this._copy.bind(this));case "[object Boolean]":return a?!0:!1;case "[object Date]":return new Date(a.getTime());case "[object Function]":return a;case "[object Number]":return a+0;case "[object Object]":var c={},b;for(b in a)c[b]=this._copy(a[b]);return c;case "[object RegExp]":return new RegExp(a);case "[object String]":return a+
"";default:return a}};MoniteredStorage.prototype.clone=function(){return new MoniteredStorage(this._copy(this.data))};MoniteredStorage.prototype.has=function(a){return a in this.data};MoniteredStorage.prototype.hasIn=function(a){for(var c=this.data,b=0;b<a.length;b++){if(!(c instanceof MoniteredStorage?c.has(a[b]):a[b]in c))return!1;c=c instanceof MoniteredStorage?c.get(a[b]):c[a[b]]}return!0};MoniteredStorage.prototype.get=function(a){return this.data[a]};
MoniteredStorage.prototype.getIn=function(a){for(var c=this.data,b=0;b<a.length;b++){if(!(c instanceof MoniteredStorage?c.has(a[b]):a[b]in c))throw Error("Invalid keyPath (at "+a[b]+")");c=c instanceof MoniteredStorage?c.get(a[b]):c[a[b]]}return c};MoniteredStorage.prototype.set=function(a,c){this.get(a)!==c&&(this.changed=!0,this.data[a]=c)};
MoniteredStorage.prototype.setIn=function(a,c){for(var b=this.data,e=a.pop(),d=0;d<a.length;d++)(b instanceof MoniteredStorage?b.has(a[d]):a[d]in b)||(b instanceof MoniteredStorage?b.set(a[d],{}):b[a[d]]={}),b=b instanceof MoniteredStorage?b.get(a[d]):b[a[d]];if(b instanceof MoniteredStorage)b.set(e,c),b.changed&&(this.changed=!0);else if("undefined"===typeof b[e]||b[e]!==c)this.changed=!0,b[e]=c};"undefined"!==typeof module&&(module.exports=MoniteredStorage);
